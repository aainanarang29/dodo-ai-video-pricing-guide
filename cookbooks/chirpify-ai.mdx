---
title: "Build a Text-to-Speech App with Per-Character Billing"
description: "Learn how to build Chirpify AI - a text-to-speech app using ElevenLabs and Dodo Payments for credit-based monetization"
---

# Chirpify AI: Text-to-Speech with Per-Character Billing

Build a modern text-to-speech web application that charges users per character using Dodo Payments. Users get 500 free characters to try, then purchase credit packs to continue generating speech.

<Frame>
  <img src="/images/chirpify-demo.png" alt="Chirpify AI Demo" />
</Frame>

<Info>
  **Before you start, make sure you have:**

  - A [Dodo Payments account](https://dashboard.dodopayments.com) (free to create)
  - An [ElevenLabs API key](https://elevenlabs.io) (free tier available)
  - Node.js 18+ installed locally
  - A [Vercel account](https://vercel.com) for deployment
  - Basic familiarity with JavaScript and REST APIs
</Info>

## What You'll Build

- A text-to-speech app powered by ElevenLabs
- Per-character billing with three pricing tiers
- Credit balance tracking with localStorage
- Dodo Payments checkout integration
- Beautiful claymorphic UI with micro-animations

## Architecture Overview

<Frame caption="Chirpify AI Architecture">
  <img src="https://link.excalidraw.com/readonly/chirpify-architecture" alt="Architecture Diagram" />
</Frame>

```
┌─────────────────┐     ┌─────────────────┐     ┌─────────────────┐
│                 │     │                 │     │                 │
│    Frontend     │────▶│  Vercel Edge    │────▶│   ElevenLabs    │
│  (HTML/CSS/JS)  │     │   Functions     │     │    TTS API      │
│                 │     │                 │     │                 │
└────────┬────────┘     └────────┬────────┘     └─────────────────┘
         │                       │
         │                       │
         ▼                       ▼
┌─────────────────┐     ┌─────────────────┐
│                 │     │                 │
│  localStorage   │     │ Dodo Payments   │
│ (Credit Store)  │     │   Checkout      │
│                 │     │                 │
└─────────────────┘     └─────────────────┘
```

## Tech Stack

| Layer | Technology | Purpose |
|-------|------------|---------|
| Frontend | HTML5, CSS3, JavaScript (ES6+) | User interface with claymorphic design |
| Backend | Node.js 18+, Vercel Serverless Functions | API routes for TTS and payments |
| Text-to-Speech | ElevenLabs API | High-quality voice synthesis |
| Payments | Dodo Payments | One-time payment processing |
| Hosting | Vercel | Edge deployment with automatic SSL |
| State | localStorage | Client-side credit balance storage |

## Pricing Model

| Pack | Characters | Price | Cost per 1K | Best For |
|------|------------|-------|-------------|----------|
| Starter | 10,000 | $5 | $0.50 | Trying it out |
| Pro | 50,000 | $10 | $0.20 | Regular users |
| Power | 200,000 | $25 | $0.125 | Power users |

---

## Step 1: Create Products on Dodo Payments

First, create your credit pack products in the Dodo Payments dashboard or via API.

### Option A: Using the Dashboard

<Frame caption="Creating a product in Dodo Payments Dashboard">
  <video
    src="https://your-storage.com/videos/dodo-create-product.mp4"
    controls
    autoPlay={false}
    muted
  />
</Frame>

1. Log into your [Dodo Payments Dashboard](https://dashboard.dodopayments.com)
2. Navigate to **Products** in the sidebar
3. Click **Create Product**
4. Fill in the product details:
   - **Name**: Starter Pack
   - **Description**: 10,000 characters for text-to-speech
   - **Price**: $5.00 (USD)
   - **Type**: One-time payment
   - **Tax Category**: Digital Products
5. Click **Create** and copy the `product_id`
6. Repeat for Pro and Power packs

### Option B: Using the API

```bash
# Create Starter Pack ($5 = 500 cents)
curl -X POST "https://test.dodopayments.com/products" \
  -H "Authorization: Bearer YOUR_DODO_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Starter Pack",
    "description": "10,000 characters for text-to-speech",
    "price": {
      "currency": "USD",
      "discount": 0,
      "price": 500,
      "purchasing_power_parity": false,
      "type": "one_time_price"
    },
    "tax_category": "digital_products"
  }'
```

<Expandable title="All three cURL commands">

```bash
# Pro Pack ($10 = 1000 cents)
curl -X POST "https://test.dodopayments.com/products" \
  -H "Authorization: Bearer YOUR_DODO_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Pro Pack",
    "description": "50,000 characters for text-to-speech",
    "price": {
      "currency": "USD",
      "discount": 0,
      "price": 1000,
      "purchasing_power_parity": false,
      "type": "one_time_price"
    },
    "tax_category": "digital_products"
  }'

# Power Pack ($25 = 2500 cents)
curl -X POST "https://test.dodopayments.com/products" \
  -H "Authorization: Bearer YOUR_DODO_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Power Pack",
    "description": "200,000 characters for text-to-speech",
    "price": {
      "currency": "USD",
      "discount": 0,
      "price": 2500,
      "purchasing_power_parity": false,
      "type": "one_time_price"
    },
    "tax_category": "digital_products"
  }'
```

</Expandable>

Save the `product_id` from each response. You'll need these for the checkout API.

<Tip>
Use `https://test.dodopayments.com` for development and `https://live.dodopayments.com` for production.
</Tip>

### Project Setup

```bash
mkdir chirpify-ai
cd chirpify-ai
npm init -y
npm install dotenv
```

Create a `.env` file in your project root:

<CodeGroup>

```bash .env
# Dodo Payments
DODO_PAYMENTS_API_KEY=sk_test_your_test_key_here
DODO_ENV=test

# ElevenLabs
ELEVENLABS_API_KEY=xi_your_elevenlabs_key_here

# App URL (update for production)
SITE_URL=http://localhost:3000
```

</CodeGroup>

<Warning>
  Never commit `.env` to version control. Add it to your `.gitignore` immediately.
</Warning>

Your `package.json`:

<CodeGroup>

```json package.json
{
  "name": "chirpify-ai",
  "version": "1.0.0",
  "description": "Text-to-Speech App with Per-Character Billing via Dodo Payments",
  "scripts": {
    "dev": "vercel dev",
    "start": "vercel dev"
  },
  "dependencies": {
    "dotenv": "^16.0.0"
  }
}
```

</CodeGroup>

---

## Step 2: Build the Checkout API

Create a serverless function that creates Dodo payment sessions and returns a checkout URL.

### Payment Flow

<Frame caption="Payment Flow Diagram">
  <img src="https://link.excalidraw.com/readonly/chirpify-payment-flow" alt="Payment Flow" />
</Frame>

```
┌──────────┐    ┌──────────┐    ┌──────────┐    ┌──────────┐
│  User    │    │ Frontend │    │  API     │    │  Dodo    │
│  clicks  │───▶│  calls   │───▶│ creates  │───▶│ returns  │
│  "Buy"   │    │ /checkout│    │ payment  │    │ link     │
└──────────┘    └──────────┘    └──────────┘    └────┬─────┘
                                                     │
┌──────────┐    ┌──────────┐    ┌──────────┐         │
│ Credits  │◀───│ Frontend │◀───│  Dodo    │◀────────┘
│ updated  │    │ receives │    │ redirects│
│          │    │ callback │    │ user back│
└──────────┘    └──────────┘    └──────────┘
```

### Create a Customer (on first visit)

Before a user can buy credits or generate speech, they need a Dodo customer account. On first visit, the frontend calls this endpoint, which creates a customer and seeds their wallet with 500 free characters.

```javascript api/customer.js
const DODO_API_KEY = process.env.DODO_PAYMENTS_API_KEY;
const DODO_BASE_URL = process.env.DODO_ENV === 'live'
  ? 'https://live.dodopayments.com'
  : 'https://test.dodopayments.com';

export default async function handler(req, res) {
  if (req.method !== 'POST') {
    return res.status(405).json({ error: 'Method not allowed' });
  }

  try {
    // Create a Dodo customer
    const customerRes = await fetch(`${DODO_BASE_URL}/customers`, {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${DODO_API_KEY}`,
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({
        email: `user_${Date.now()}@chirpify.ai`,
        name: 'Chirpify User',
      }),
    });
    const customer = await customerRes.json();

    // Credit 500 free characters to their wallet
    const walletRes = await fetch(
      `${DODO_BASE_URL}/customers/${customer.customer_id}/wallets/ledger-entries`,
      {
        method: 'POST',
        headers: {
          'Authorization': `Bearer ${DODO_API_KEY}`,
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({
          amount: 500,
          currency: 'USD',
          entry_type: 'credit',
          idempotency_key: `welcome_${customer.customer_id}`,
          reason: 'Welcome bonus: 500 free characters',
        }),
      }
    );
    const wallet = await walletRes.json();

    res.json({ customerId: customer.customer_id, balance: wallet.balance });
  } catch (err) {
    res.status(500).json({ error: 'Failed to create customer' });
  }
}
```

The `customer_id` gets stored in the browser's `localStorage`. Every subsequent API call includes it so the server knows whose wallet to check.

### Checkout Implementation

```javascript api/checkout.js
const PRODUCTS = {
  starter: { id: 'pdt_YOUR_STARTER_ID', characters: 10000, name: 'Starter Pack' },
  pro:     { id: 'pdt_YOUR_PRO_ID',     characters: 50000, name: 'Pro Pack' },
  power:   { id: 'pdt_YOUR_POWER_ID',   characters: 200000, name: 'Power Pack' },
};

export default async function handler(req, res) {
  const { pack, customerId } = req.body;
  const product = PRODUCTS[pack];

  const response = await fetch(`${DODO_BASE_URL}/payments`, {
    method: 'POST',
    headers: {
      'Authorization': `Bearer ${DODO_API_KEY}`,
      'Content-Type': 'application/json',
    },
    body: JSON.stringify({
      payment_link: true,
      billing: { country: 'US' },
      customer: { customer_id: customerId },
      product_cart: [{ product_id: product.id, quantity: 1 }],
      return_url: `${returnUrl}?success=true`,
    }),
  });

  const data = await response.json();
  res.json({ checkoutUrl: data.payment_link });
}
```

Two key differences from a basic integration:
1. **`customer: { customer_id: customerId }`** — Links the payment to an existing Dodo customer instead of a hardcoded placeholder. This is what connects the payment to the right wallet.
2. **No `characters` in the return URL** — Credits are added server-side via webhook, not client-side via URL params.

<Warning>
**Critical:** Always include `payment_link: true` in your request body. Without it, `payment_link` will be `null` in the response and users won't be able to checkout.
</Warning>

---

## Step 3: Handle Payment Success with Webhooks

When a payment succeeds, Dodo fires a `payment.succeeded` webhook. Your webhook handler maps the purchased product to a character count and credits the customer's wallet. No URL params, no localStorage — the server is the source of truth.

```javascript api/webhook.js
// Map product IDs to character credits
const PRODUCT_CREDITS = {
  'pdt_YOUR_STARTER_ID': 10000,   // Starter Pack
  'pdt_YOUR_PRO_ID':     50000,   // Pro Pack
  'pdt_YOUR_POWER_ID':   200000,  // Power Pack
};

export default async function handler(req, res) {
  const event = req.body;
  const eventType = req.headers['webhook-event-type'];

  if (eventType !== 'payment.succeeded') {
    return res.json({ received: true });
  }

  const customerId = event.customer?.customer_id;
  const paymentId = event.payment_id;
  const productId = event.product_cart?.[0]?.product_id;
  const characters = PRODUCT_CREDITS[productId];

  // Credit the customer's wallet
  await fetch(
    `${DODO_BASE_URL}/customers/${customerId}/wallets/ledger-entries`,
    {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${DODO_API_KEY}`,
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({
        amount: characters,
        currency: 'USD',
        entry_type: 'credit',
        idempotency_key: paymentId, // Prevents double-credit on retry
        reason: `Credit pack: ${characters.toLocaleString()} characters`,
      }),
    }
  );

  res.json({ received: true });
}
```

The `idempotency_key` is critical — Dodo retries failed webhooks, and this key ensures the wallet is only credited once per payment.

<Tip>
Register your webhook URL in the [Dodo Dashboard](https://dashboard.dodopayments.com) under **Webhooks**. Filter for `payment.succeeded` events only.
</Tip>

---

## Step 4: Track Usage and Deduct Credits (Server-Side)

Every TTS request now goes through the server, which checks the wallet balance before calling ElevenLabs and debits only after a successful generation. Users can't manipulate their balance — Dodo's wallet is the single source of truth.

```javascript api/speak.js
export default async function handler(req, res) {
  const { text, voice, customerId } = req.body;
  const charCost = text.length;

  // 1. Check wallet balance
  const balanceRes = await fetch(
    `${DODO_BASE_URL}/customers/${customerId}/wallets`,
    { headers: { 'Authorization': `Bearer ${DODO_API_KEY}` } }
  );
  const balanceData = await balanceRes.json();
  const wallet = balanceData.items?.find(w => w.currency === 'USD');
  const balance = wallet?.balance || 0;

  if (balance < charCost) {
    return res.status(402).json({
      error: `Insufficient credits. Need ${charCost}, have ${balance}.`,
      balance,
    });
  }

  // 2. Generate speech via ElevenLabs
  const audio = await elevenLabsClient.textToSpeech.convert(voiceId, {
    text, model_id: "eleven_multilingual_v2"
  });

  // 3. Debit wallet ONLY after successful generation
  const debitRes = await fetch(
    `${DODO_BASE_URL}/customers/${customerId}/wallets/ledger-entries`,
    {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${DODO_API_KEY}`,
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({
        amount: charCost,
        currency: 'USD',
        entry_type: 'debit',
        idempotency_key: `tts_${customerId}_${Date.now()}`,
        reason: `TTS generation: ${charCost} characters`,
      }),
    }
  );
  const debitData = await debitRes.json();

  res.json({
    audio: buffer.toString("base64"),
    characters: charCost,
    balance: debitData.balance, // Return new balance to frontend
  });
}
```

The pattern: **check → generate → debit**. Never charge for a failed generation. The `402` status code tells the frontend to show the pricing modal.

---

## Step 5: Build the Pricing UI

Create an attractive modal that displays when users need more credits.

<Frame caption="Pricing modal design">
  <img src="/images/chirpify-pricing-modal.png" alt="Pricing Modal" />
</Frame>

### HTML Structure

```html
<div class="pricing-overlay" id="pricingOverlay">
  <div class="pricing-modal">
    <div class="pricing-header">
      <h2>Buy Credits</h2>
      <p>Get more characters to keep generating speech!</p>
    </div>

    <div class="pricing-grid">
      <div class="pricing-card" data-pack="starter">
        <div class="amount">10K</div>
        <div class="label">characters</div>
        <div class="price">$5</div>
      </div>

      <div class="pricing-card popular" data-pack="pro">
        <div class="amount">50K</div>
        <div class="label">characters</div>
        <div class="price">$10</div>
        <div class="tag">Most Popular</div>
      </div>

      <div class="pricing-card" data-pack="power">
        <div class="amount">200K</div>
        <div class="label">characters</div>
        <div class="price">$25</div>
        <div class="tag">Best Value</div>
      </div>
    </div>

    <button class="pricing-close" id="pricingClose">Maybe Later</button>
  </div>
</div>
```

### JavaScript Handler

```javascript
// Handle pricing card clicks
document.querySelectorAll('.pricing-card').forEach(card => {
  card.addEventListener('click', async () => {
    const pack = card.dataset.pack;

    // Show loading state
    card.style.opacity = '0.7';
    card.style.pointerEvents = 'none';

    try {
      const res = await fetch('/api/checkout', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ pack }),
      });

      const data = await res.json();

      if (!res.ok) {
        throw new Error(data.error || 'Checkout failed');
      }

      // Redirect to Dodo Payments checkout
      window.location.href = data.checkoutUrl;

    } catch (err) {
      showError(err.message);
      card.style.opacity = '1';
      card.style.pointerEvents = 'auto';
    }
  });
});
```

---

## Step 6: Display Credit Balance

A live counter in the header that shows the balance from Dodo's wallet. Green when healthy, yellow when running low, red when empty.

```javascript
// Fetch balance from Dodo wallet via your API
async function fetchBalance() {
  const res = await fetch(`/api/balance?customer_id=${customerId}`);
  const data = await res.json();
  credits = data.balance;
  updateCreditsDisplay();
}

function updateCreditsDisplay() {
  const display = document.querySelector('.credits-number');
  const container = document.getElementById('creditsCount');

  display.textContent = credits >= 1000
    ? (credits / 1000).toFixed(credits % 1000 === 0 ? 0 : 1) + 'K'
    : credits.toString();

  container.classList.remove('low', 'empty');
  if (credits <= 0) container.classList.add('empty');
  else if (credits < 100) container.classList.add('low');
}
```

The balance comes from `/api/balance`, which reads the Dodo wallet. After each TTS generation, the `/api/speak` response includes the updated balance so the UI stays in sync without an extra API call.

---

## Step 7: ElevenLabs Integration

Create the text-to-speech API endpoint using ElevenLabs.

```javascript api/speak.js
const ELEVENLABS_API_KEY = process.env.ELEVENLABS_API_KEY;

// Voice ID mapping
const VOICES = {
  george: 'JBFqnCBsd6RMkjVDRZzb',
  aria: 'Xb7hH8MSUJpSbSDYk0k2',
  roger: 'CwhRBWXzGAHq8TQ4Fs17',
  sarah: 'EXAVITQu4vr4xnSDxMaL',
  charlie: 'IKne3meq5aSn9XLyUdCD',
};

export default async function handler(req, res) {
  if (req.method !== 'POST') {
    return res.status(405).json({ error: 'Method not allowed' });
  }

  const { text, voice = 'george' } = req.body;

  if (!text || text.length === 0) {
    return res.status(400).json({ error: 'Text is required' });
  }

  const voiceId = VOICES[voice] || VOICES.george;

  try {
    const response = await fetch(
      `https://api.elevenlabs.io/v1/text-to-speech/${voiceId}`,
      {
        method: 'POST',
        headers: {
          'xi-api-key': ELEVENLABS_API_KEY,
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({
          text,
          model_id: 'eleven_monolingual_v1',
          voice_settings: {
            stability: 0.5,
            similarity_boost: 0.75,
          },
        }),
      }
    );

    if (!response.ok) {
      throw new Error('ElevenLabs API error');
    }

    // Convert audio to base64
    const audioBuffer = await response.arrayBuffer();
    const base64Audio = Buffer.from(audioBuffer).toString('base64');

    res.json({
      audio: base64Audio,
      characters: text.length,
      voice,
    });
  } catch (err) {
    console.error('TTS error:', err.message);
    res.status(500).json({ error: 'Speech generation failed' });
  }
}
```

---

## Deployment

### Environment Variables

Set these in your Vercel dashboard under **Settings > Environment Variables**:

<Frame caption="Setting environment variables in Vercel">
  <video
    src="https://your-storage.com/videos/vercel-env-vars.mp4"
    controls
    autoPlay={false}
    muted
  />
</Frame>

| Variable | Description | Example |
|----------|-------------|---------|
| `DODO_PAYMENTS_API_KEY` | Your Dodo API key | `sk_live_...` or `sk_test_...` |
| `DODO_ENV` | Environment (`test` or `live`) | `test` |
| `ELEVENLABS_API_KEY` | Your ElevenLabs API key | `xi_...` |
| `SITE_URL` | Your production URL | `https://chirpify-ai.vercel.app` |

### Vercel Configuration

```json vercel.json
{
  "framework": null,
  "buildCommand": "",
  "installCommand": "npm install",
  "outputDirectory": "public"
}
```

### Deploy Command

```bash
# Install Vercel CLI
npm install -g vercel

# Deploy to production
vercel --prod
```

---

## Testing

### Test Card Details

Use Dodo's test card to simulate payments in the test environment:

| Field | Value |
|-------|-------|
| Card Number | `4242 4242 4242 4242` |
| Expiry | Any future date (e.g., `12/34`) |
| CVC | Any 3 digits (e.g., `123`) |
| ZIP | Any 5 digits (e.g., `12345`) |

### Full Test Flow

Walk through this end-to-end. If every step checks out, your integration is complete.

<Steps>
  <Step title="Use your free characters">
    Load the app, type a short sentence, pick a voice, and hit generate.

    **Expected:**
    ```
    ✓ Audio plays back in the browser
    ✓ Credit counter drops from 500 → ~470 (depending on text length)
    ✓ No payment required
    ```
  </Step>

  <Step title="Trigger the upsell">
    Enter text longer than your remaining balance (or just keep generating until you run out).

    **Expected:**
    ```
    ✓ Pricing modal appears with three packs
    ✓ No ElevenLabs API call is made
    ✓ Credit counter shows 0 (red)
    ```
  </Step>

  <Step title="Complete a test purchase">
    Click the Pro Pack ($10 / 50K characters). You'll be redirected to Dodo's checkout page.

    Enter the test card:
    - Card: `4242 4242 4242 4242`
    - Expiry: any future date
    - CVC: any 3 digits

    **Expected:**
    ```
    ✓ Redirected to Dodo checkout page
    ✓ Test card accepted
    ✓ Redirected back to your app
    ✓ URL briefly shows ?success=true&characters=50000
    ✓ Toast notification: "50,000 characters added!"
    ✓ Credit counter updates to ~50,000
    ```
  </Step>

  <Step title="Verify in Dodo dashboard">
    Open [test.dodopayments.com](https://test.dodopayments.com), go to **Payments**.

    **Expected:**
    ```
    ✓ Payment shows status: Succeeded
    ✓ Amount: $10.00
    ✓ Product: Pro Pack
    ```

    <Check>
      If the payment shows in the dashboard and your credits updated, the integration is working end-to-end.
    </Check>
  </Step>

  <Step title="Generate more speech">
    Go back to the app, generate a few more clips.

    **Expected:**
    ```
    ✓ Audio plays normally
    ✓ Credits deduct correctly per character
    ✓ Balance persists after page refresh
    ```
  </Step>
</Steps>

---

## Complete Source Code

<CardGroup cols={2}>
  <Card title="GitHub Repository" icon="github" href="https://github.com/aainanarang29/chirpify-ai">
    View the complete source code for Chirpify AI
  </Card>
  <Card title="Live Demo" icon="play" href="https://chirpify-ai.vercel.app">
    Try the live demo with 500 free characters
  </Card>
</CardGroup>

---

## Key Takeaways

<CardGroup cols={2}>
  <Card title="payment_link: true" icon="link">
    Always include this parameter to get a checkout URL from Dodo Payments. The most common integration mistake.
  </Card>
  <Card title="Dodo Wallets = Server-Side Credits" icon="database">
    Wallet ledger entries give you tamper-proof, auditable credit tracking. No database needed — Dodo is your source of truth.
  </Card>
  <Card title="Webhooks + Idempotency Keys" icon="arrow-right">
    Always use the `payment_id` as your `idempotency_key` when crediting wallets. Dodo retries failed webhooks, and this prevents double-credits.
  </Card>
  <Card title="Check → Generate → Debit" icon="shield">
    Always check wallet balance before calling ElevenLabs. Only debit after a successful generation. Return 402 to trigger the upsell modal.
  </Card>
</CardGroup>

---

## Test vs Live Environment

<Warning>
**Important:** This cookbook uses **test environment** keys and URLs for demonstration purposes. Before going to production, you must switch to live credentials.
</Warning>

### Environment Differences

| Aspect | Test Environment | Live Environment |
|--------|------------------|------------------|
| Base URL | `https://test.dodopayments.com` | `https://live.dodopayments.com` |
| API Keys | Start with `sk_test_` | Start with `sk_live_` |
| Payments | Simulated (no real charges) | Real money transactions |
| Test Cards | `4242 4242 4242 4242` works | Real credit cards only |
| Dashboard | [test.dodopayments.com](https://test.dodopayments.com) | [dashboard.dodopayments.com](https://dashboard.dodopayments.com) |

### Switching to Production

1. **Create live products** in the [Dodo Payments Dashboard](https://dashboard.dodopayments.com)
2. **Generate a live API key** from the dashboard
3. **Update environment variables** in Vercel:
   ```bash
   DODO_PAYMENTS_API_KEY=sk_live_your_live_key
   DODO_ENV=live
   ```
4. **Update product IDs** in `api/checkout.js` with your live product IDs
5. **Test with a real card** (you can refund test purchases)

<Tip>
**Recommended Setup:**
- **Development/Staging:** Use `test` environment with test API keys
- **Production:** Use `live` environment with live API keys

Set `DODO_ENV=test` in your staging deployment and `DODO_ENV=live` in production. The code automatically switches the base URL based on this variable.
</Tip>

---

## Need Help?

<CardGroup cols={3}>
  <Card title="Dodo Payments Docs" icon="book" href="https://docs.dodopayments.com">
    Official API documentation
  </Card>
  <Card title="ElevenLabs Docs" icon="microphone" href="https://docs.elevenlabs.io">
    Text-to-speech API reference
  </Card>
  <Card title="Vercel Docs" icon="triangle" href="https://vercel.com/docs">
    Deployment and serverless functions
  </Card>
</CardGroup>
